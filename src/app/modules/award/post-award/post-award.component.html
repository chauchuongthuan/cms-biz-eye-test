<div class="block w-full">
    <div class="w-full mb-[30px]">
        <h3 class="titlePage">{{state}} post award</h3>
    </div>

    <nz-spin [nzSpinning]="isLoading">
        <div class="bg-[white] py-[16px] rounded-[10px]">
            <form [formGroup]="formAward" class="w-full">
                <div class="flex">
                    <div class="w-2/12 px-[8px] mb-[16px] tl-p:w-1/2 ">
                        <app-digitop-upload [fileList]="[formAward.get('image')?.value]" [title]="'Thumbnail'"
                            CENSORSHIP (changeFile)="changeFileUpload($event, 'image')" class="w-full"
                            [isUsingFormArray]="true" [multiple]="false"></app-digitop-upload>
                    </div>
                    <div class="w-2/12 px-[8px] mb-[16px] tl-p:w-1/2 flex">
                        <app-digitop-upload [fileList]="[formAward.get('detailImage')?.value]" [title]="'Detail Image'"
                            CENSORSHIP (changeFile)="changeFileUpload($event, 'detailImage')" class="w-full"
                            [isUsingFormArray]="true" [multiple]="false"></app-digitop-upload>
                    </div>
                </div>
                <div class="flex gap-4 w-full">
                    <div class="w-6/12 px-[8px] mb-[16px] tl-p:w-full">
                        <div class="w-12/12">
                            <label class="labelForm">Title <span class="text-[#ff0000]">*</span></label>
                            <input formControlName="title"
                                [ngClass]="submitted && formAward.get('title')?.errors ? 'ant-input-status-error ng-invalid' : ''"
                                class="input-title w-full" nz-input nzSize="large" nzBorderless placeholder="Title"
                                (ngModelChange)="onChangeTitle('vi')" />
                        </div>
                        <div class="w-12/12 pt-[16px]">
                            <label class="labelForm">Description <span class="text-[#ff0000]">*</span></label>
                            <app-digitop-editor class="textEditor w-full" nzSize="large"
                                [initData]="formAward.get('shortDescription')?.value"
                                (onChangeData)="onChangeEditor($event, 'shortDescription')"
                                (onChangeText)="onChangeText($event)" placeHolder="Description"></app-digitop-editor>
                        </div>
                        <div class="w-12/12 pt-[16px]">
                            <label class="labelForm">Challenge <span class="text-[#ff0000]">*</span></label>
                            <app-digitop-editor class="textEditor w-full" nzSize="large"
                                [initData]="formAward.get('challenge')?.value"
                                (onChangeData)="onChangeEditor($event, 'challenge')"
                                (onChangeText)="onChangeText($event)" placeHolder="Challenge"></app-digitop-editor>
                        </div>
                        <div class="w-12/12 pt-[16px]">
                            <label class="labelForm">Solutions <span class="text-[#ff0000]">*</span></label>
                            <app-digitop-editor class="textEditor w-full" nzSize="large"
                                [initData]="formAward.get('solution')?.value"
                                (onChangeData)="onChangeEditor($event, 'solution')"
                                (onChangeText)="onChangeText($event)" placeHolder="Solutions"></app-digitop-editor>
                        </div>
                    </div>
                    <div class="w-6/12 px-[8px] mb-[16px] tl-p:w-full">
                        <div class="w-12/12">
                            <label class="labelForm">Is Host <span class="text-[#ff0000]">*</span></label>
                            <nz-switch formControlName="isHost"> </nz-switch>
                        </div>
                        <div class="w-12/12 pt-[16px]">
                            <label class="labelForm">Followers <span class="text-[#ff0000]">*</span></label>
                            <input formControlName="followers"
                                [ngClass]="submitted && formAward.get('followers')?.errors ? 'ant-input-status-error ng-invalid' : ''"
                                class="input-title w-full" nz-input nzSize="large" nzBorderless
                                placeholder="Followers" />
                        </div>
                        <div class="w-12/12 pt-[16px]">
                            <label class="labelForm">Engagement Rate <span class="text-[#ff0000]">*</span></label>
                            <input formControlName="engagementRate"
                                [ngClass]="submitted && formAward.get('engagementRate')?.errors ? 'ant-input-status-error ng-invalid' : ''"
                                class="input-title w-full" nz-input nzSize="large" nzBorderless
                                placeholder="Engagement Rate" />
                        </div>
                        <div class="w-12/12 pt-[16px]">
                            <label class="labelForm">Impressions <span class="text-[#ff0000]">*</span></label>
                            <input formControlName="impressions"
                                [ngClass]="submitted && formAward.get('impressions')?.errors ? 'ant-input-status-error ng-invalid' : ''"
                                class="input-title w-full" nz-input nzSize="large" nzBorderless
                                placeholder="Impressions" />
                        </div>
                        <div class="w-12/12 pt-[16px] flex gap-4">
                            <div class="w-6/12">
                                <label class="labelForm">Video <span class="text-[#ff0000]">*</span></label>
                                <input formControlName="video"
                                    [ngClass]="submitted && formAward.get('video')?.errors ? 'ant-input-status-error ng-invalid' : ''"
                                    class="input-title w-full" nz-input nzSize="large" nzBorderless
                                    placeholder="Video" />
                            </div>
                            <div class="w-6/12">
                                <label class="labelForm">Client <span class="text-[#ff0000]">*</span></label>
                                <input formControlName="client"
                                    [ngClass]="submitted && formAward.get('client')?.errors ? 'ant-input-status-error ng-invalid' : ''"
                                    class="input-title w-full" nz-input nzSize="large" nzBorderless
                                    placeholder="Client" />
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <div class="w-6/12">
                                <nz-form-item>
                                    <nz-form-control>
                                        <nz-form-label [nzSpan]="'vertical'">Award
                                            <span class="required">(*)</span></nz-form-label>
                                        <nz-select ngDefaultControl formControlName="award">
                                            <ng-container *ngIf="
                                award &&
                                award.length
                                ">
                                                <nz-option [nzValue]="item.id" [nzLabel]="item.title" *ngFor="
                                        let item of award
                                    "></nz-option>
                                            </ng-container>
                                        </nz-select>

                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="w-6/12">
                                <nz-form-item>
                                    <nz-form-control>
                                        <nz-form-label [nzSpan]="'vertical'">Category
                                            <span class="required">(*)</span></nz-form-label>
                                        <nz-select ngDefaultControl formControlName="category">
                                            <ng-container *ngIf="
                                    categories &&
                                    categories.length
                                ">
                                                <nz-option [nzValue]="item.id" [nzLabel]="item.title" *ngFor="
                                        let item of categories
                                    "></nz-option>
                                            </ng-container>
                                        </nz-select>

                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="w-6/12">
                                <nz-form-item>
                                    <nz-form-control>
                                        <nz-form-label [nzSpan]="'vertical'">Expertise
                                            <span class="required">(*)</span></nz-form-label>
                                        <nz-select ngDefaultControl formControlName="expertise">
                                            <ng-container *ngIf="
                                  expertise &&
                                  expertise.length
                                  ">
                                                <nz-option [nzValue]="item.id" [nzLabel]="item.title" *ngFor="
                                          let item of expertise
                                      "></nz-option>
                                            </ng-container>
                                        </nz-select>

                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="SeoContent">
                    <div
                        class="text-[16px] text-blue-100 font-bold py-[16px] border-y border-[#f2f2f2] flex justify-between items-center">
                        <div class="text-[16px] text-blue-100 font-bold px-[16px] flex items-center">Share Of Voice</div>
                        <a (click)="addLineShareOfVoice()"
                            class="text-[white] w-[120px] flex lg:w-[150px] justify-center items-center py-[8px] px-[8px] lg:py-[16px] lg:px-[20px] hover:bg-pink-100 bg-blue-100 font-bold hover:text-[white] mr-[16px] duration-300 mb-[16px]">Add
                            SoV</a>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-[16px]">
                        <div formArrayName="shareOfVoice" *ngFor="let shareOfVoice of shareOfVoice?.controls; let i = index"
                            class="relative">
                            <div [formGroupName]="i" class="border-dashed border-2 border-sky-500 p-[16px]">
                                <div class="w-full">
                                    <label class="labelForm">Name <span class="text-[#ff0000]">*</span></label>
                                    <input formControlName="name"
                                    class="input-title w-full" nz-input nzSize="large" nzBorderless
                                    placeholder="Name" />
                                    <label class="labelForm">Number <span class="text-[#ff0000]">*</span></label>
                                    <input formControlName="number"
                                    class="input-title w-full" nz-input nzSize="large" type="number" nzBorderless
                                    placeholder="Number" />
                                    <!-- <div *ngIf="submitted && gallery.get('galleryImage')?.errors" class="input-text-error">
                                <span>Image not blank</span>
                            </div> -->
                                </div>
                                <a class="text-[white] absolute top-0 right-0 w-[29px] flex items-center py-[8px] px-[8px] bg-pink-100 hover:bg-blue-100 font-bold hover:text-[white]"
                                    (click)="removeLineShareOfVoice(i)">
                                    <span nz-icon nzType="delete"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="SeoContent">
                    <div
                        class="text-[16px] text-blue-100 font-bold py-[16px] border-y border-[#f2f2f2] flex justify-between items-center">
                        <div class="text-[16px] text-blue-100 font-bold px-[16px] flex items-center">Gallery</div>
                        <a (click)="addLine()"
                            class="text-[white] w-[120px] flex lg:w-[150px] justify-center items-center py-[8px] px-[8px] lg:py-[16px] lg:px-[20px] hover:bg-pink-100 bg-blue-100 font-bold hover:text-[white] mr-[16px] duration-300 mb-[16px]">Add
                            Gallery</a>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-8 gap-4 p-[16px]">
                        <div formArrayName="gallery" *ngFor="let gallery of galleries?.controls; let i = index"
                            class="relative">
                            <div [formGroupName]="i" class="border-dashed border-2 border-sky-500 p-[16px]">
                                <div class="w-full">
                                    <app-digitop-upload [fileList]="[gallery?.value]" [title]="'Desktop Image'"
                                        CENSORSHIP class="w-full" [isUsingFormArray]="true"
                                        (changeFile)="changeFileUploadForm($event,i, true)"
                                        [multiple]="false"></app-digitop-upload>
                                    <!-- <div *ngIf="submitted && gallery.get('galleryImage')?.errors" class="input-text-error">
                                <span>Image not blank</span>
                            </div> -->
                                </div>
                                <a class="text-[white] absolute top-0 right-0 w-[29px] flex items-center py-[8px] px-[8px] bg-pink-100 hover:bg-blue-100 font-bold hover:text-[white]"
                                    (click)="removeLine(i)">
                                    <span nz-icon nzType="delete"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="SeoContent">
                    <div
                        class="text-[16px] text-blue-100 font-bold py-[16px] border-y border-[#f2f2f2] flex justify-between items-center">
                        <div class="text-[16px] text-blue-100 font-bold px-[16px] flex items-center">Social</div>
                        <a (click)="addLineSocial()"
                            class="text-[white] w-[120px] flex lg:w-[150px] justify-center items-center py-[8px] px-[8px] lg:py-[16px] lg:px-[20px] hover:bg-pink-100 bg-blue-100 font-bold hover:text-[white] mr-[16px] duration-300 mb-[16px]">Add
                            Social</a>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-8 gap-4 p-[16px]">
                        <div formArrayName="social" *ngFor="let social of social?.controls; let i = index"
                            class="relative">
                            <div [formGroupName]="i" class="border-dashed border-2 border-sky-500 p-[16px]">
                                <div class="w-full">
                                    <app-digitop-upload [fileList]="[social?.value]" [title]="'Desktop Image'"
                                        CENSORSHIP class="w-full" [isUsingFormArray]="true"
                                        (changeFile)="changeFileUploadForm($event,i, false)"
                                        [multiple]="false"></app-digitop-upload>
                                    <!-- <div *ngIf="submitted && gallery.get('galleryImage')?.errors" class="input-text-error">
                              <span>Image not blank</span>
                          </div> -->
                                </div>
                                <a class="text-[white] absolute top-0 right-0 w-[29px] flex items-center py-[8px] px-[8px] bg-pink-100 hover:bg-blue-100 font-bold hover:text-[white]"
                                    (click)="removeLineSocial(i)">
                                    <span nz-icon nzType="delete"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="SeoContent">
                    <div class="text-[16px] text-blue-100 font-bold px-[16px] py-[16px] border-y border-[#f2f2f2]">SEO
                        Content </div>
                    <div class="p-[16px]">
                        <div class="flex flex-wrap mx-[-8px]">
                            <div class="w-1/12 px-[8px] mb-[16px] tl-p:w-full">
                                <app-digitop-upload [fileList]="[formAward.get('metaImage')?.value]"
                                    [title]="'Hình ảnh'" CENSORSHIP (changeFile)="changeFileUpload($event, 'metaImage')"
                                    class="w-full" [isUsingFormArray]="true" [multiple]="false"></app-digitop-upload>
                            </div>

                            <div class="w-11/12 px-[8px] mb-[16px] tl-p:w-full">
                                <div class="flex flex-wrap mx-[-8px]">
                                    <div class="w-1/2 px-[8px] mb-[16px] tl-p:w-full">
                                        <label class="labelForm">Tiêu đề </label>
                                        <input formControlName="metaTitle" [ngClass]="
                             submitted && formAward.get('sortOrder')?.errors ? 'ant-input-status-error ng-invalid' : ''
                          " nz-input class="w-full" nzSize="large" placeholder="Nhập thông tin" type="text" />
                                    </div>

                                    <div class="w-1/2 px-[8px] mb-[16px] tl-p:w-full">
                                        <label class="labelForm">Từ khóa </label>
                                        <input formControlName="metaKeyword" [ngClass]="
                             submitted && formAward.get('sortOrder')?.errors ? 'ant-input-status-error ng-invalid' : ''
                          " nz-input class="w-full" nzSize="large" placeholder="Nhập thông tin" type="text" />
                                    </div>

                                    <div class="w-full px-[8px] mb-[16px]">
                                        <label class="labelForm">Mô tả </label>
                                        <textarea class="w-full" nzSize="large" rows="4"
                                            formControlName="metaDescription" nz-input
                                            placeholder="Nhập thông tin"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="listBtn pt-[16px] px-[20px] border-t border-[#f2f2f2]">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-[8px]">
                            <button (click)="onSave()" class="item btnPink">hoàn thành</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </nz-spin>
</div>